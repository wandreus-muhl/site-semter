{% extends "base.html" %}
{% block conteudo %}
<div class="d-flex justify-content-between">
    <p>Para criar um novo processo, <a href="/novo_processo" class="text-blue-flag text-decoration-none">clique
            aqui!</a></p>
    <div>
        <i class="bi bi-funnel-fill"></i>
        <select class="btn dropdown-toggle p-0" name="inputKind" id="inputKind"
            required>
            <option value="Sem filtro">Sem filtro</option>
            <option value="Encaminhado">Encaminhado</option>
            <option value="Em análise">Em análise</option>
            <option value="Aprovado">Aprovado</option>
            <option value="Não aprovado">Não aprovado</option>
            <option value="Devolvido">Devolvido</option>
        </select>
    </div>
</div>
<div class="row mb-3 w-100">
    {% if mensagem %}
    <p>{{ mensagem }}</p>
    {% endif %}

    {% for atualizacao, processo, status in query %}

    {% if status.nome == "Encaminhado" %}
    <div class="col-xl-4 col-lg-6 col-md-6 mb-4">
        <a href="/processo/{{ processo.id }}" class="text-decoration-none text-dark">
            <div class="shadow px-2 pt-2 border-yellow border-start border-30">
                <div class="border-bottom">
                    <h3 class="title mb-1">{{ processo.nome }}</h3>
                    <p class="text-secondary mb-1">{{processo.numero}}</p>
                </div>
                <div class="d-flex text-secondary my-1">
                    <p class="me-1 m-0">{{ status.nome }}</p>
                    <p class="m-0">({{ atualizacao.data_atualizacao }})</p>
                </div>
                <p class="m-0">{{ processo.tipo_processo }}</p>
            </div>
        </a>
    </div>

    {% elif status.nome == "Aprovado" %}
    <div class="col-xl-4 col-lg-6 col-md-6 mb-4">
        <a href="/processo/{{ processo.id }}" class="text-decoration-none text-dark">
            <div class="shadow px-2 pt-2 border-green border-start border-30">
                <div class="border-bottom">
                    <h3 class="title mb-1">{{ processo.nome }}</h3>
                    <p class="text-secondary mb-1">{{processo.numero}}</p>
                </div>
                <div class="d-flex text-secondary my-1">
                    <p class="me-1 m-0">{{ status.nome }}</p>
                    <p class="m-0">({{ atualizacao.data_atualizacao }})</p>
                </div>
                <p class="m-0">{{ processo.tipo_processo }}</p>
            </div>
        </a>
    </div>

    {% elif status.nome == "Não aprovado" %}
    <div class="col-xl-4 col-lg-6 col-md-6 mb-4">
        <a href="/processo/{{ processo.id }}" class="text-decoration-none text-dark">
            <div class="shadow px-2 pt-2 border-red border-start border-30">
                <div class="border-bottom">
                    <h3 class="title mb-1">{{ processo.nome }}</h3>
                    <p class="text-secondary mb-1">{{processo.numero}}</p>
                </div>
                <div class="d-flex text-secondary my-1">
                    <p class="me-1 m-0">{{ status.nome }}</p>
                    <p class="m-0">({{ atualizacao.data_atualizacao }})</p>
                </div>
                <p class="m-0">{{ processo.parecer }}</p>
            </div>
        </a>
    </div>

    {% elif status.nome == "Devolvido" %}
    <div class="col-xl-4 col-lg-6 col-md-6 mb-4">
        <a href="/processo/{{ processo.id }}" class="text-decoration-none text-dark">
            <div class="shadow px-2 pt-2 border-orange border-start border-30">
                <div class="border-bottom">
                    <h3 class="title mb-1">{{ processo.nome }}</h3>
                    <p class="text-secondary mb-1">{{processo.numero}}</p>
                </div>
                <div class="d-flex text-secondary my-1">
                    <p class="me-1 m-0">{{ status.nome }}</p>
                    <p class="m-0">({{ atualizacao.data_atualizacao }})</p>
                </div>
                <p class="m-0">{{ processo.parecer }}</p>
            </div>
        </a>
    </div>

    {% else %}
    <div class="col-xl-4 col-lg-6 col-md-6 mb-4">
        <a href="/processo/{{ processo.id }}" class="text-decoration-none text-dark">
            <div class="shadow px-2 pt-2 border-yellow border-start border-30">
                <div class="border-bottom">
                    <h3 class="title mb-1">{{ processo.nome }}</h3>
                    <p class="text-secondary mb-1">{{processo.numero}}</p>
                </div>
                <div class="d-flex text-secondary my-1">
                    <p class="me-1 m-0">{{ status.nome }}</p>
                    <p class="m-0">({{ atualizacao.data_atualizacao }})</p>
                </div>
                <p class="m-0">{{ processo.tipo_processo }}</p>
            </div>
        </a>
    </div>
    {% endif %}
    {% endfor %}
</div>

{% endblock %}